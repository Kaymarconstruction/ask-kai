<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ask Kai – Kaymar Consulting</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    .profile-pic {
      width: 140px;
      height: 140px;
      border-radius: 9999px;
      object-fit: cover;
      object-position: center;
      margin: 0 auto;
    }
  </style>
</head>
<body class="bg-white text-gray-800">
  <header class="bg-white shadow p-4 flex flex-col items-center justify-center">
    <img src="https://i.imgur.com/uYWtV9r.png" alt="Kai Profile" class="profile-pic mb-2" />
    <h1 class="text-3xl font-bold text-green-600">Ask Kai</h1>
    <p class="italic text-sm text-gray-600 mt-1">Your mate Kai — Helping you with all things carpentry, building, and design advice.</p>
  </header>

  <main class="flex flex-col items-center justify-center min-h-[80vh] p-8">
    <div class="max-w-2xl w-full bg-white rounded-2xl shadow-lg p-6">
      <h2 class="text-xl font-semibold mb-2 text-center">Ask Kai...</h2>
      
      <input id="askInput" type="text" placeholder="Type your question here..." class="w-full border p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-600" />
      <p id="flashingExamples" class="text-sm text-gray-500 text-center mt-2"></p>

      <button class="mt-4 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition">Submit</button>

      <div id="responseArea" class="mt-6 p-4 bg-gray-100 rounded-lg text-gray-700"></div>
    </div>
  </main>

  <footer class="text-center text-gray-500 text-sm p-4 space-x-4">
    <a href="https://www.instagram.com/askkai_official" target="_blank" class="hover:underline">Instagram</a> |
    <a href="https://www.tiktok.com/@askkai_official" target="_blank" class="hover:underline">TikTok</a> |
    <a href="https://www.youtube.com/@askkai_official" target="_blank" class="hover:underline">YouTube</a> |
    <a href="https://www.facebook.com/askkai_official" target="_blank" class="hover:underline">Facebook</a>
    <div class="mt-2">&copy; 2025 Kaymar Construction | Powered by Ask Kai</div>
  </footer>

<script>
  const examples = [
    "What size rafters do I need for a 4m span?",
    "What's the best timber for coastal decks?",
    "How much should I budget for a 6x4m EkoDeck?",
    "Best paint for weatherboards in Victoria?",
    "Pergola sizing rules for Aussie standards?"
  ];

  let index = 0;
  const flashingExamples = document.getElementById("flashingExamples");

  function showNextExample() {
    flashingExamples.textContent = examples[index];
    index = (index + 1) % examples.length;
  }

  setInterval(showNextExample, 3000);
  showNextExample();

  async function sendQuestion() {
    const input = document.getElementById('askInput').value.trim();
    const responseArea = document.getElementById('responseArea');
    responseArea.innerHTML = "Thinking...";

    const apiKey = "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"; // <-- PASTE NEW KEY HERE (keep inside "" quotes)

    const headers = {
      "Content-Type": "application/json",
      "Authorization": `Bearer ${apiKey}`
    };

    const body = JSON.stringify({
      model: "gpt-4",
      messages: [
        {
          role: "system",
          content: "You are Kai Marlow, a friendly experienced carpenter and building consultant from Frankston, Victoria, Australia. You give expert advice in plain language about carpentry, decking, pergolas, roofing, design ideas, materials, handyman tips, quoting, and landscaping. Always be friendly, helpful, and sound like a relaxed Aussie tradie."
        },
        {
          role: "user",
          content: input
        }
      ],
      temperature: 0.6,
      max_tokens: 600
    });

    try {
      const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: headers,
        body: body
      });

      const data = await response.json();
      if (data.choices && data.choices.length > 0 && data.choices[0].message && data.choices[0].message.content) {
        responseArea.innerHTML = data.choices[0].message.content.trim();
      } else {
        responseArea.innerHTML = "Sorry mate, couldn't find a clear answer!";
      }
    } catch (error) {
      responseArea.innerHTML = "Error connecting to Kai. Try again shortly.";
      console.error(error);
    }
  }

  document.querySelector("button").addEventListener("click", sendQuestion);
</script>

</body>
</html>
